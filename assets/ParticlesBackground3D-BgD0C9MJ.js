import{j as t}from"./ui-TgfYKy2g.js";import{r as e}from"./vendor-DarsSWdw.js";import{C as r,u as n}from"./fiber-BECttOPu.js";import{g as o}from"./three-CfhqBrE7.js";const i="undefined"!=typeof window;function a({count:r=3e3}){const i=e.useRef(null),[a,s]=e.useState({x:0,y:0,z:0}),c=e.useRef(0);e.useEffect((()=>{let t;const e=e=>{t||(t=window.setTimeout((()=>{const r=e.clientX/window.innerWidth*2-1,n=-e.clientY/window.innerHeight*2+1;s({x:r,y:n,z:0}),t=0}),50))};return window.addEventListener("mousemove",e,{passive:!0}),()=>{window.removeEventListener("mousemove",e),t&&window.clearTimeout(t)}}),[]);const{positions:d,speeds:u,sizes:h,colors:m}=e.useMemo((()=>{const t=new Float32Array(3*r),e=new Float32Array(r),n=new Float32Array(r),o=new Float32Array(3*r);for(let i=0;i<r;i++)t[3*i]=.2*Math.floor(i/50)-10+.1*Math.random(),t[3*i+1]=i%50*.3-7+.05*Math.random(),t[3*i+2]=5*(Math.random()-.5),e[i]=.01+.03*Math.random(),n[i]=.04*Math.random()+.01,o[3*i]=.2+.2*Math.random(),o[3*i+1]=.3+.3*Math.random(),o[3*i+2]=.8+.2*Math.random();return{positions:t,speeds:e,sizes:n,colors:o}}),[r]);return n((t=>{if(!i.current)return;const e=t.clock.getElapsedTime(),n=i.current.geometry.attributes.position.array,o=Math.random()>.998,s=o?10*(Math.random()-.5):0,d=o?10*(Math.random()-.5):0;c.current=(c.current+1)%3;const h=c.current*(r/3),m=Math.min(h+r/3,r);for(let r=h;r<m;r++){const t=3*r,i=10*a.x-n[t],c=10*a.y-n[t+1];if(Math.sqrt(i*i+c*c)<5){const e=5e-4;n[t]-=i*e*2,n[t+1]-=c*e*2}if(o){const e=n[t]-s,r=n[t+1]-d,o=Math.sqrt(e*e+r*r);o<3&&(n[t]+=e/o*.04,n[t+1]+=r/o*.04)}n[t+1]-=u[r]*(1+.05*Math.sin(e+r)),r%5==0&&(n[t]+=.002*Math.sin(.5*e+.1*r)),n[t+1]<-7&&(n[t+1]=7,n[t]=.2*Math.floor(r/50)-10+.1*Math.random())}i.current.geometry.attributes.position.needsUpdate=!0,i.current.rotation.y=.05*Math.sin(.05*e),i.current.rotation.x=.03*Math.cos(.05*e)})),t.jsxs("points",{ref:i,children:[t.jsxs("bufferGeometry",{children:[t.jsx("bufferAttribute",{attach:"attributes-position",array:d,count:r,itemSize:3}),t.jsx("bufferAttribute",{attach:"attributes-color",array:m,count:r,itemSize:3}),t.jsx("bufferAttribute",{attach:"attributes-size",array:h,count:r,itemSize:1})]}),t.jsx("pointsMaterial",{size:.05,sizeAttenuation:!0,transparent:!0,opacity:.8,depthWrite:!1,vertexColors:!0,blending:o})]})}function s(){return t.jsxs(t.Fragment,{children:[t.jsx("ambientLight",{intensity:.1}),t.jsx("directionalLight",{position:[0,10,5],intensity:.2})]})}const c=()=>{const[n,o]=e.useState(500);return e.useEffect((()=>{if(i){const t=navigator.hardwareConcurrency||2,e=t>4,r=t>2,n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),i=window.innerWidth;let a=500;e&&!n&&i>1024?a=2e3:r&&!n&&i>768?a=1e3:n&&(a=300),o(a)}}),[]),t.jsx("div",{className:"fixed inset-0 -z-10 opacity-80 pointer-events-none",children:t.jsxs(r,{camera:{position:[0,0,10],fov:60},dpr:[.6,1.5],gl:{alpha:!0,antialias:!1,powerPreference:"high-performance",depth:!1},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},frameloop:"demand",children:[t.jsx(s,{}),t.jsx(a,{count:n})]})})};export{c as default};
