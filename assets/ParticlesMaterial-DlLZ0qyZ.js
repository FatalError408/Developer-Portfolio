import{j as d}from"./ui-mbOQ0UrO.js";import{r as y}from"./vendor-APk6H_Kk.js";import{g as I}from"./three-CgMPOFvX.js";import{u as w}from"./fiber-CDjaDbg4.js";const v=({count:s,mousePosition:M})=>{const i=y.useRef(null),u=y.useRef(0),{positions:b,speeds:z,sizes:A,colors:j}=(()=>{const c=new Float32Array(s*3),n=new Float32Array(s),t=new Float32Array(s),o=new Float32Array(s*3);for(let r=0;r<s;r++)c[r*3]=Math.floor(r/50)*.2-10+Math.random()*.1,c[r*3+1]=r%50*.3-7+Math.random()*.05,c[r*3+2]=(Math.random()-.5)*5,n[r]=.01+Math.random()*.03,t[r]=Math.random()*.04+.01,o[r*3]=.2+Math.random()*.2,o[r*3+1]=.3+Math.random()*.3,o[r*3+2]=.8+Math.random()*.2;return{positions:c,speeds:n,sizes:t,colors:o}})();return w(c=>{if(!i.current)return;const n=c.clock.getElapsedTime(),t=i.current.geometry.attributes.position.array,o=Math.random()>.998,r=o?(Math.random()-.5)*10:0,g=o?(Math.random()-.5)*10:0;u.current=(u.current+1)%3;const x=u.current*(s/3),F=Math.min(x+s/3,s);for(let a=x;a<F;a++){const e=a*3,l=M.x*10-t[e],f=M.y*10-t[e+1];if(Math.sqrt(l*l+f*f)<5&&(t[e]-=l*5e-4*2,t[e+1]-=f*5e-4*2),o){const m=t[e]-r,p=t[e+1]-g,h=Math.sqrt(m*m+p*p);h<3&&(t[e]+=m/h*.04,t[e+1]+=p/h*.04)}t[e+1]-=z[a]*(1+.05*Math.sin(n+a)),a%5===0&&(t[e]+=Math.sin(n*.5+a*.1)*.002),t[e+1]<-7&&(t[e+1]=7,t[e]=Math.floor(a/50)*.2-10+Math.random()*.1)}i.current.geometry.attributes.position.needsUpdate=!0,i.current.rotation.y=Math.sin(n*.05)*.05,i.current.rotation.x=Math.cos(n*.05)*.03}),d.jsxs("points",{ref:i,children:[d.jsxs("bufferGeometry",{children:[d.jsx("bufferAttribute",{attach:"attributes-position",array:b,count:s,itemSize:3}),d.jsx("bufferAttribute",{attach:"attributes-color",array:j,count:s,itemSize:3}),d.jsx("bufferAttribute",{attach:"attributes-size",array:A,count:s,itemSize:1})]}),d.jsx("pointsMaterial",{size:.05,sizeAttenuation:!0,transparent:!0,opacity:.8,depthWrite:!1,vertexColors:!0,blending:I})]})};export{v as default};
